(function(t){function e(e){for(var i,r,n=e[0],l=e[1],c=e[2],d=0,v=[];d<n.length;d++)r=n[d],s[r]&&v.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(v.length)v.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,n=1;n<a.length;n++){var l=a[n];0!==s[l]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},s={app:0},o=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"093d":function(t,e,a){"use strict";var i=a("f0b3"),s=a.n(i);e["default"]=s.a},"0b02":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n\tReport\n")])},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},"23dd":function(t,e,a){"use strict";var i=a("2b4b"),s=a.n(i);s.a},"2b4b":function(t,e,a){},"3aaf":function(t,e,a){},"3ab5":function(t,e,a){"use strict";var i=a("d4f2"),s=a.n(i);s.a},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),s=a("bb71");a("da64");i["a"].use(s["a"],{iconfont:"md"});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("keep-alive",[a("router-view")],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tabs",{attrs:{"fixed-tabs":""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-tab-item",{attrs:{id:"tab1"}},[a("Home")],1),a("v-tab-item",{attrs:{id:"tab2"}},[a("Price")],1),a("v-tab-item",{attrs:{id:"tab3"}},[a("Report")],1),a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{attrs:{href:"#tab1"}},[a("v-icon",[t._v("list")])],1),a("v-tab",{attrs:{href:"#tab2"}},[a("v-icon",[t._v("money")])],1),a("v-tab",{attrs:{href:"#tab3"}},[a("v-icon",[t._v("bar_chart")])],1)],1)},l=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Home"},[a("v-list",[t._l(t.sortlist,function(e,i){return[0!==i?a("v-divider",{attrs:{inset:""}}):t._e(),a("v-list-tile",{attrs:{avatar:""},nativeOn:{click:function(a){t.$router.push({name:"goods",params:{gid:e.gid}})}}},[a("v-list-tile-avatar",{attrs:{size:"50"}},[a("img",{attrs:{src:e.image},on:{click:function(a){a.stopPropagation(),t.$router.push({name:"bill",params:{gid:e.gid}})}}}),a("div",{staticClass:"avatar-text"},[t._v(t._s(e.origin))])]),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.name)+" "+t._s(e.widget)+" "+t._s(e.spec))]),a("v-list-tile-sub-title",[t._v(t._s(e.logistics))]),a("v-list-tile-sub-title",{staticClass:"text--primary"},[a("span",{staticClass:"pink--text"},[t._v("¥"+t._s(e.costprice))]),a("span",{staticClass:"pink--text"},[t._v(" ¥"+t._s(e.price)+" ")]),a("span",{staticClass:"red--text"},[t._v("¥"+t._s(e.price-e.costprice))])])],1)],1)]})],2),a("v-btn",{staticStyle:{bottom:"60px"},attrs:{fixed:"",dark:"",fab:"",bottom:"",right:"",color:"pink",to:"goods"}},[a("v-icon",[t._v("add")])],1)],1)},u=[],d=a("2f62"),v={computed:Object(d["c"])("goods",["sortlist"])},p=v,f=(a("c219"),a("2877")),g=a("6544"),m=a.n(g),b=a("8336"),h=a("ce7e"),x=a("132d"),_=a("8860"),w=a("ba95"),k=a("c954"),y=a("5d23"),V=Object(f["a"])(p,c,u,!1,null,null,null);V.options.__file="Home.vue";var $=V.exports;m()(V,{VBtn:b["a"],VDivider:h["a"],VIcon:x["a"],VList:_["a"],VListTile:w["a"],VListTileAvatar:k["a"],VListTileContent:y["a"],VListTileSubTitle:y["b"],VListTileTitle:y["c"]});var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Price"},[a("v-list",[t._l(t.sortlist,function(e,i){return[i>0?a("v-divider",{attrs:{inset:""}}):t._e(),a("v-list-tile",[a("v-list-tile-action",[a("v-checkbox",{model:{value:t.selection[e.gid],callback:function(a){t.$set(t.selection,e.gid,a)},expression:"selection[item.gid]"}})],1),a("v-list-tile-avatar",{attrs:{size:"50"},on:{click:function(a){t.selection[e.gid]=!t.selection[e.gid]}}},[a("img",{attrs:{src:e.image}})]),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.name)+" "+t._s(e.origin))]),a("v-list-tile-sub-title",[i!==t.sortlist.length-1?a("v-btn",{attrs:{small:"",flat:"",icon:""},on:{click:function(e){e.stopPropagation(),t.doSort(i,t.sortlist.length-1)}}},[a("v-icon",[t._v("vertical_align_bottom")])],1):t._e(),0!==i?a("v-btn",{attrs:{small:"",flat:"",icon:""},on:{click:function(e){e.stopPropagation(),t.doSort(i,0)}}},[a("v-icon",[t._v("vertical_align_top")])],1):t._e(),i!==t.sortlist.length-1?a("v-btn",{attrs:{small:"",flat:"",icon:""},on:{click:function(e){e.stopPropagation(),t.doSort(i,i+1)}}},[a("v-icon",[t._v("arrow_downward")])],1):t._e(),0!==i?a("v-btn",{attrs:{small:"",flat:"",icon:""},on:{click:function(e){e.stopPropagation(),t.doSort(i,i-1)}}},[a("v-icon",[t._v("arrow_upward")])],1):t._e()],1)],1)],1)]})],2),a("v-btn",{staticStyle:{bottom:"60px"},attrs:{fixed:"",dark:"",fab:"",bottom:"",right:"",color:"pink"},on:{click:t.toImage}},[a("v-icon",[t._v("image")])],1)],1)},C=[],j={computed:{...Object(d["c"])("goods",["sortlist"]),...Object(d["d"])("goods",["selection"])},methods:{...Object(d["b"])("goods",["sort"]),toImage(){this.$router.push({name:"imagecreate",params:{data:this.sortlist.filter(t=>this.selection[t.gid])}})},doSort(t,e){this.sort({index:t,toIndex:e})}}},T=j,S=(a("3ab5"),a("ac7c")),D=a("40fe"),q=Object(f["a"])(T,O,C,!1,null,null,null);q.options.__file="Price.vue";var E=q.exports;m()(q,{VBtn:b["a"],VCheckbox:S["a"],VDivider:h["a"],VIcon:x["a"],VList:_["a"],VListTile:w["a"],VListTileAction:D["a"],VListTileAvatar:k["a"],VListTileContent:y["a"],VListTileSubTitle:y["b"],VListTileTitle:y["c"]});var I=a("762c"),R=new i["a"]({data(){return{goodsSelection:{}}}}),L={components:{Home:$,Price:E,Report:I["default"]},data(){return{active:"tab1"}},watch:{active(t){R.$emit("view.show."+{tab1:"Home",tab2:"Price",tab3:"Report"}[t],t)}}},P=L,M=(a("981f"),a("71a3")),A=a("c671"),B=a("fe57"),F=a("9a96"),U=Object(f["a"])(P,n,l,!1,null,null,null);U.options.__file="Tabs.vue";var z=U.exports;m()(U,{VIcon:x["a"],VTab:M["a"],VTabItem:A["a"],VTabs:B["a"],VTabsSlider:F["a"]});var H={name:"App",components:{Tabs:z}},G=H,Z=(a("7faf"),a("7496")),J=Object(f["a"])(G,o,r,!1,null,null,null);J.options.__file="App.vue";var N=J.exports;m()(J,{VApp:Z["a"]});var W=a("8c4f"),Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-toolbar",{attrs:{fixed:"",dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.$router.go(-1)}}},[a("v-icon",[t._v("arrow_back")])],1),a("v-toolbar-title",[t._v("商品")]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("delete")])],1),a("v-btn",{attrs:{type:"submit",icon:""},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[a("v-icon",[t._v("save")])],1)],1),a("div",{staticClass:"header-padding"}),a("v-card",[a("FileSelector",{attrs:{accept:"image/*",value:t.values.image,placeholder:"选择图片"},on:{input:t.onImageChange}},[a("v-img",{attrs:{src:t.values.image,"aspect-ratio":"2.75"}})],1),a("v-container",{attrs:{"grid-list-xl":"","text-xs-center":""}},[a("v-text-field",{attrs:{label:"名称",required:"",rules:t.rules.name,"validate-on-blur":""},model:{value:t.values.name,callback:function(e){t.$set(t.values,"name",e)},expression:"values.name"}}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"产地",required:"",rules:t.rules.origin,"validate-on-blur":""},model:{value:t.values.origin,callback:function(e){t.$set(t.values,"origin",e)},expression:"values.origin"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"重量",required:"",rules:t.rules.widget,"validate-on-blur":""},model:{value:t.values.widget,callback:function(e){t.$set(t.values,"widget",e)},expression:"values.widget"}})],1)],1)],1)],1),a("v-card",[a("v-container",{attrs:{"grid-list-xl":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{type:"number",min:"0",label:"代理价",required:"",rules:t.rules.costprice,"validate-on-blur":""},model:{value:t.values.costprice,callback:function(e){t.$set(t.values,"costprice",t._n(e))},expression:"values.costprice"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{type:"number",label:"零售价",required:"",rules:t.rules.price,"validate-on-blur":""},model:{value:t.values.price,callback:function(e){t.$set(t.values,"price",t._n(e))},expression:"values.price"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-checkbox",{attrs:{label:"上架"},model:{value:t.values.active,callback:function(e){t.$set(t.values,"active",e)},expression:"values.active"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"数量",required:"",rules:t.rules.spec,"validate-on-blur":""},model:{value:t.values.spec,callback:function(e){t.$set(t.values,"spec",e)},expression:"values.spec"}})],1)],1),a("v-text-field",{attrs:{label:"物流",required:"",rules:t.rules.logistics,"validate-on-blur":""},model:{value:t.values.logistics,callback:function(e){t.$set(t.values,"logistics",e)},expression:"values.logistics"}})],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialogOptions.show,callback:function(e){t.$set(t.dialogOptions,"show",e)},expression:"dialogOptions.show"}},[a("v-card",[a("v-card-text",[t._v(t._s(t.dialogOptions.content))]),a("v-card-actions",[a("v-spacer"),t._l(t.dialogOptions.btns,function(e,i){return a("v-btn",{key:i,attrs:{flat:"",color:e.color},on:{click:function(a){t.dialogBtnClick(e)}}},[t._v(t._s(e.text))])})],2)],1)],1)],1)},K=[],Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("input",{ref:"input",attrs:{type:"file",accept:t.accept,multiple:t.multiple},on:{change:t.change}}),t._t("default"),t.value?t._e():a("div",{staticClass:"placeholder"},[t._v("\n\t\t"+t._s(t.placeholder)+"\n\t")])],2)},X=[],tt={props:{value:"",accept:"",multiple:"",placeholder:""},methods:{change(t){this.$emit("input",[].slice.call(t.target.files)),this.$refs.input.value=null}}},et=tt,at=(a("c2c6"),Object(f["a"])(et,Q,X,!1,null,"567f8d5a",null));at.options.__file="FileSelector.vue";var it=at.exports;const st={required:function(t){return t.toString().trim().length>0||"必填项"},tel:function(t){return!!/^1\d{10}$/.test(t)||"格式错误"},gtZero:function(t){return t>0||"应大于 0"},gtOrEqualZero:function(t){return t>=0||"应大于等于 0"}};var ot=st;const rt=document.createElement("canvas"),nt=rt.getContext("2d");var lt=function(t,e=400){return new Promise((a,i)=>{const s=URL.createObjectURL(t),o=new Image;o.src=s,o.onload=function(){nt.clearRect(0,0,rt.width,rt.height),e=Math.min(e,o.width,o.height),rt.width=e,rt.height=e;const t=Math.ceil((o.width-o.height)/2),i=Math.min(o.width,o.height);nt.drawImage(o,t>0?t:0,t<0?-t:0,i,i,0,0,e,e),a(rt.toDataURL())},o.onerror=function(t){i(t)}})};function ct(){return{show:!1,title:"",content:"",btns:[{role:"cancel",color:"green darken-1",text:"取消"},{role:"ok",color:"blue darken-1",text:"确定"}]}}var ut={data(){return{dialogOptions:ct()}},methods:{openDialog(t={}){return this.dialogPromise=new Promise(e=>{t.show=!0,this.dialogResolve=e,this.dialogOptions=Object.assign(ct(),t)})},dialogBtnClick(t){this.dialogResolve(t),this.dialogPromise.then(t=>{t&&(this.dialogOptions.show=!1)})}}},dt={deactivated(){Object.assign(this.$data,this.$options.data())}},vt={components:{FileSelector:it},mixins:[ut,dt],activated(){this.fetchData()},beforeRouteLeave(t,e,a){this.$refs.form.validate()?a():(a(!1),this.openDialog({content:"还没有保存，确定退出?"}).then(t=>{"ok"==t.role?a():a(!1)}))},data(){return{valid:!0,rules:{name:[ot.required],origin:[ot.required],widget:[ot.required],spec:[ot.required],costprice:[ot.required,ot.gtZero],price:[ot.required,ot.gtOrEqualZero],logistics:[ot.required]},values:{gid:"",gtid:"",image:"",name:"",origin:"",widget:"",spec:"",shelflife:-1,costprice:1,price:1,logistics:"",sort:0,active:!0,delete:!1,remark:null,createtime:Date.now(),modifytime:null,json:null}}},computed:Object(d["c"])("goods",["get"]),methods:{...Object(d["b"])("goods",["put"]),onImageChange(t){Promise.all(t.map(t=>lt(t,400))).then(t=>{this.values.image=t[0]})},fetchData(){Object.assign(this.values,this.get(this.$route.params.gid))},submit(){this.$refs.form.validate()&&this.put(Object.assign({},this.values)).then(()=>{return history.back()})}}},pt=vt,ft=(a("9b57"),a("b0af")),gt=a("99d9"),mt=a("a523"),bt=a("169a"),ht=a("0e8f"),xt=a("4bd4"),_t=a("adda"),wt=a("a722"),kt=a("9910"),yt=a("2677"),Vt=a("71d9"),$t=a("2a7f"),Ot=Object(f["a"])(pt,Y,K,!1,null,"8c23547c",null);Ot.options.__file="Goods.vue";var Ct=Ot.exports;m()(Ot,{VBtn:b["a"],VCard:ft["a"],VCardActions:gt["a"],VCardText:gt["b"],VCheckbox:S["a"],VContainer:mt["a"],VDialog:bt["a"],VFlex:ht["a"],VForm:xt["a"],VIcon:x["a"],VImg:_t["a"],VLayout:wt["a"],VSpacer:kt["a"],VTextField:yt["a"],VToolbar:Vt["a"],VToolbarTitle:$t["a"]});var jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-toolbar",{attrs:{fixed:"",dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.$router.go(-1)}}},[a("v-icon",[t._v("arrow_back")])],1),a("v-toolbar-title",[t._v("开单")]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("delete")])],1),a("v-btn",{attrs:{type:"submit",icon:""},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[a("v-icon",[t._v("save")])],1)],1),a("div",{staticClass:"header-padding"}),a("v-card",[a("v-img",{attrs:{src:t.goods.image,"aspect-ratio":"2.75"}}),a("v-container",{attrs:{"grid-list-xl":"","text-xs-center":""}},[a("v-text-field",{attrs:{disabled:"",label:"名称","hide-details":""},model:{value:t.goods.name,callback:function(e){t.$set(t.goods,"name",e)},expression:"goods.name"}}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{disabled:"",label:"代理价","hide-details":""},model:{value:t.values.costprice,callback:function(e){t.$set(t.values,"costprice",e)},expression:"values.costprice"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{disabled:"",label:"零售价","hide-details":""},model:{value:t.values.price,callback:function(e){t.$set(t.values,"price",e)},expression:"values.price"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"优惠额",min:"0"},model:{value:t.values.offer,callback:function(e){t.$set(t.values,"offer",e)},expression:"values.offer"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-checkbox",{attrs:{label:"已收款"},model:{value:t.values.income,callback:function(e){t.$set(t.values,"income",e)},expression:"values.income"}})],1)],1)],1)],1),a("v-card",[a("v-container",{attrs:{"grid-list-xl":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{type:"date",label:"日期",required:""},model:{value:t.values.billtime,callback:function(e){t.$set(t.values,"billtime",e)},expression:"values.billtime"}})],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialogOptions.show,callback:function(e){t.$set(t.dialogOptions,"show",e)},expression:"dialogOptions.show"}},[a("v-card",[a("v-card-text",[t._v(t._s(t.dialogOptions.content))]),a("v-card-actions",[a("v-spacer"),t._l(t.dialogOptions.btns,function(e,i){return a("v-btn",{key:i,attrs:{flat:"",color:e.color},on:{click:function(a){t.dialogBtnClick(e)}}},[t._v(t._s(e.text))])})],2)],1)],1)],1)},Tt=[];function St(){var t=Date.now();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?a:3&a|8).toString(16)})}function Dt(t,e){const a=new Date(t),i={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};return/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),Object.keys(i).forEach(t=>{new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)))}),e}var qt={mixins:[ut,dt],activated(){this.fetchData()},beforeRouteLeave(t,e,a){this.$refs.form.validate()?a():(a(!1),this.openDialog({content:"还没有保存，确定退出?"}).then(t=>{"ok"==t.role?a():a(!1)}))},data(){return{valid:!0,goods:{image:"",name:"",origin:""},customer:{name:"",wx:"",qq:"",tel:""},receiver:{name:"",tel:"",address:""},values:{bid:"",gid:"",cid:"",rid:"",aid:"",costprice:1,price:0,widget:"",spec:"",profit:0,offer:0,income:!0,remark:"",billtime:Dt(Date.now(),"yyyy-MM-dd"),modifytime:null,createtime:Date.now(),json:null}}},computed:Object(d["c"])("goods",{getGoods:"get"}),methods:{fetchData(){if(this.$route.params.gid){const t=this.getGoods(this.$route.params.gid);Object.assign(this.goods,t),["gid","constprice","price","widget","spec"].forEach(e=>{this.values[e]=t[e]})}else if(this.$route.params.bid){const t=this.get(this.$route.params.bid);Object.assign(this.goods,this.getGoods(t.gid)),Object.assign(this.customer,this.getCustomer(t.cid)),Object.assign(this.receiver,this.getReceiver(t.rid))}},submit(){}}},Et=qt,It=(a("7e6d"),Object(f["a"])(Et,jt,Tt,!1,null,"98fa9076",null));It.options.__file="Bill.vue";var Rt=It.exports;m()(It,{VBtn:b["a"],VCard:ft["a"],VCardActions:gt["a"],VCardText:gt["b"],VCheckbox:S["a"],VContainer:mt["a"],VDialog:bt["a"],VFlex:ht["a"],VForm:xt["a"],VIcon:x["a"],VImg:_t["a"],VLayout:wt["a"],VSpacer:kt["a"],VTextField:yt["a"],VToolbar:Vt["a"],VToolbarTitle:$t["a"]});var Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{fixed:"",dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.$router.go(-1)}}},[a("v-icon",[t._v("arrow_back")])],1),a("v-toolbar-title",[t._v("价表生成")])],1),a("div",{staticClass:"header-padding"}),a("v-card",[a("v-container",{attrs:{"grid-list-xl":"","text-xs-center":""}},[a("v-select",{attrs:{items:t.templateItems,label:"模板"},model:{value:t.values.template,callback:function(e){t.$set(t.values,"template",e)},expression:"values.template"}}),a("v-slider",{attrs:{min:"35",max:"100",step:"5","tick-size":"3","thumb-size":"28",label:"质量","hide-details":"",ticks:"","thumb-label":"always"},nativeOn:{touchend:function(t){t.stopPropagation()}},model:{value:t.values.quality,callback:function(e){t.$set(t.values,"quality",e)},expression:"values.quality"}}),a("v-slider",{attrs:{min:"20",max:"100",step:"5","tick-size":"3","thumb-size":"28",label:"缩放","hide-details":"",ticks:"","thumb-label":"always"},nativeOn:{touchend:function(t){t.stopPropagation()}},model:{value:t.values.scale,callback:function(e){t.$set(t.values,"scale",e)},expression:"values.scale"}})],1)],1),a("div",{ref:"box",staticClass:"box"},[a("div",{ref:"list",staticClass:"price-list"},t._l(t.list,function(e,i){return a("div",{staticClass:"template1"},[a("img",{attrs:{src:e.image}}),a("div",{staticClass:"itemcontent"},[a("div",{staticClass:"text name-row"},[a("span",[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" ("+t._s(e.origin)+") "+t._s(e.widget))])]),a("div",{staticClass:"text logistics-row"},[a("span",[t._v(t._s(e.logistics))])]),a("div",{staticClass:"text price-row"},[a("span",{staticClass:"price"},[t._v("¥"+t._s(e.price))]),t._v(" "),a("span",[t._v("("+t._s(e.spec)+")")])])])])}))]),a("v-btn",{staticStyle:{bottom:"60px"},attrs:{fixed:"",dark:"",fab:"",bottom:"",right:"",color:"pink"},on:{click:t.download}},[a("v-icon",[t._v("arrow_downward")])],1),a("div",{staticStyle:{height:"0",overflow:"hidden"}},[a("canvas",{ref:"canvas"})])],1)},Pt=[],Mt=a("74ce");const At=new Mt["a"]("keep");At.version(1).stores({gtype:"gtid",goods:"gid",customer:"cid",receiver:"rid",account:"aid",bill:"bid"});var Bt=At;const Ft=document.createElement("a");Ft.innerText="下载";var Ut=function(t,e,a){let i;if(/image/.test(e)){const e=atob(t),a=e.length;i=new Uint8Array(a);for(let t=0;t<a;t++)i[t]=e.charCodeAt(t)}else i=t;if(!i||!i.length)return;const s=URL.createObjectURL(new Blob([i],{type:e}));Ft.download=a||Date.now(),Ft.href=s,Ft.click(),URL.revokeObjectURL(s)},zt=a("951f"),Ht=a.n(zt),Gt={activated(){this.fetchData()},data(){return{templateItems:["默认模板"],list:[],values:{template:"默认模板",scale:100,quality:100}}},methods:{fetchData(){this.list=this.$route.params.data},scaleUI(){function t(e,a){e.scrollWidth>e.clientWidth&&(a--,e.firstElementChild.style.fontSize=a+"px",t(e,a))}this.$nextTick(()=>{this.$refs.list.clientWidth&&([].slice.call(this.$refs.list.querySelectorAll(".text")).forEach(e=>{t(e,parseInt(getComputedStyle(e.firstElementChild).fontSize))}),this.$refs.box.style.height=this.$refs.list.getBoundingClientRect().height+"px")})},download(){Ht()(this.$refs.list,{canvas:this.$refs.canvas}).then(t=>{const e=window.devicePixelRatio||1,a=t.getContext("2d"),i=t.width/2,s=t.height/2,o=a.getImageData(0,0,i,s);let r=i,n=s;if(t.width=r,t.height=n,100!==this.values.scale){r=Math.floor(i*this.values.scale/100),n=Math.floor(s*this.values.scale/100);const e=document.createElement("canvas"),l=e.getContext("2d");e.width=i,e.height=s,l.putImageData(o,0,0),t.width=r,t.height=n,a.drawImage(e,0,0,i,s,0,0,r,n)}else a.putImageData(o,0,0);t.style.width=r/e+"px",t.style.height=n/e+"px",Ut(t.toDataURL("image/jpeg",this.values.quality/100).split(",")[1],"image/jpeg",`价格表${(new Date).toJSON()}.jpg`)})}}},Zt=Gt,Jt=(a("23dd"),a("b56d")),Nt=a("ba0d"),Wt=Object(f["a"])(Zt,Lt,Pt,!1,null,"f7b60ab4",null);Wt.options.__file="ImageCreate.vue";var Yt=Wt.exports;m()(Wt,{VBtn:b["a"],VCard:ft["a"],VContainer:mt["a"],VIcon:x["a"],VSelect:Jt["a"],VSlider:Nt["a"],VToolbar:Vt["a"],VToolbarTitle:$t["a"]}),i["a"].use(W["a"]);var Kt=new W["a"]({mode:"history",base:"",routes:[{path:"./",name:"tabs",component:z},{path:"./goods",name:"goods",component:Ct},{path:"./bill",name:"bill",component:Rt},{path:"./imagecreate",name:"imagecreate",component:Yt}]});const Qt={data:[],selection:{}};Bt.goods.toArray().then(t=>{Qt.data.push(...t),Qt.data.forEach(t=>{Qt.selection[t.gid]=!1})});var Xt={namespaced:!0,state:Qt,mutations:{update(t,e){t.data.some(t=>{if(t.gid===e.gid)return Object.assign(t,e),!0})},add(t,e){t.data.push(e),t.selection[e.gid]=!1}},actions:{put({commit:t,getters:e,dispatch:a},i){return i.gid?(i.modifytime=Date.now(),a("update",i)):(i.gid=St(),i.sort=(e.sortlist[0]||{sort:1}).sort-1,i.createtime=Date.now(),a("add",i))},update({commit:t},e){return Bt.goods.update(e.gid,e).then(()=>{t("update",e)})},add({commit:t},e){return Bt.goods.add(e).then(()=>{t("add",e)})},sort({state:t,dispatch:e},{index:a,toIndex:i}){t.data.splice(i,0,...t.data.splice(a,1)),t.data.forEach((t,a)=>{e("update",{gid:t.gid,sort:a})})}},getters:{get(t,e){return t=>e.indexes[t]},sortlist(t){return t.data.sort((t,e)=>{return t.sort>e.sort?1:-1})},indexes(t){const e={};return t.data.forEach(t=>{e[t.gid]=t}),e}}};i["a"].use(d["a"]);var te=new d["a"].Store({modules:{goods:Xt},mutations:{},actions:{}}),ee=a("9483");Object(ee["a"])("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached(){console.log("Content has been cached for offline use.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}}),i["a"].config.productionTip=!1,new i["a"]({router:Kt,store:te,render:t=>t(N)}).$mount("#app")},"64cc":function(t,e,a){},"694c":function(t,e,a){},"6b47":function(t,e,a){},"762c":function(t,e,a){"use strict";var i=a("0b02"),s=a("093d"),o=(a("ffcc"),a("2877")),r=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,null,null);r.options.__file="Report.vue",e["default"]=r.exports},"7e6d":function(t,e,a){"use strict";var i=a("64cc"),s=a.n(i);s.a},"7faf":function(t,e,a){"use strict";var i=a("f3f7"),s=a.n(i);s.a},"981f":function(t,e,a){"use strict";var i=a("a983"),s=a.n(i);s.a},"9b57":function(t,e,a){"use strict";var i=a("3aaf"),s=a.n(i);s.a},a983:function(t,e,a){},b9e2:function(t,e,a){},c219:function(t,e,a){"use strict";var i=a("6b47"),s=a.n(i);s.a},c2c6:function(t,e,a){"use strict";var i=a("694c"),s=a.n(i);s.a},d4f2:function(t,e,a){},f0b3:function(t,e){},f3f7:function(t,e,a){},ffcc:function(t,e,a){"use strict";var i=a("b9e2"),s=a.n(i);s.a}});
//# sourceMappingURL=app.7f27c470.js.map